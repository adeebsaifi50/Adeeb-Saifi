<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gravity Flip Survival | Adeeb Saifi</title>
<link rel="icon" type="image/png" href="logo.png">
<style>
html, body {
    margin:0; padding:0; width:100%; height:100%; overflow:hidden;
    font-family: Arial, sans-serif;
    background: #0f0c29;
}
#gameArea{
    position:relative; width:100%; height:100%;
    overflow:hidden;
}
.player{
    position:absolute; width:40px; height:40px; border-radius:50%;
    background: radial-gradient(circle at 30% 30%, #00ff8a, #008f5c);
    box-shadow: 0 0 15px #00ff8a,0 0 25px #00ff8a55;
    top:50%; left:50%; transform:translate(-50%,-50%);
    animation: pulse 1s infinite alternate;
}
@keyframes pulse {
    0% { transform: scale(1); box-shadow:0 0 15px #00ff8a,0 0 25px #00ff8a55; }
    100% { transform: scale(1.2); box-shadow:0 0 25px #00ff8a,0 0 40px #00ff8a77; }
}
.obstacle{
    position:absolute; border-radius:5px;
}
button{
    position:absolute; padding:15px 25px; border:none; border-radius:10px;
    background:#00ff8a; color:#021; font-weight:bold; cursor:pointer;
    transition:0.3s; font-size:1em;
}
button:hover{ background:#00d278; transform:scale(1.05);}
#startBtn{ top:50%; left:50%; transform:translate(-50%,-50%);}
#scoreBoard{ top:10px; left:10px; font-size:1.2em; color:white; position:absolute;}
#highscore{ top:10px; right:10px; font-size:1.2em; color:white; position:absolute;}
.particle{
    position:absolute; width:3px; height:3px;
    background:white; border-radius:50%;
    opacity:0.7;
}
</style>
</head>
<body>
<div id="gameArea">
    <div id="player" class="player"></div>
</div>

<button id="startBtn">Start Game</button>
<div id="scoreBoard">Score: 0</div>
<div id="highscore">Highscore: 0</div>

<script>
const gameArea = document.getElementById('gameArea');
const player = document.getElementById('player');
const startBtn = document.getElementById('startBtn');
const scoreBoard = document.getElementById('scoreBoard');
const highscoreDisplay = document.getElementById('highscore');

let obstacles=[], gameInterval, obstacleInterval, score=0, speed=3, playerLeftPercent=50;
let highscore = localStorage.getItem('gravityFlipHighscore')||0;
highscoreDisplay.textContent='Highscore: '+highscore;

// Particle background
const particles=[];
for(let i=0;i<60;i++){
    const p=document.createElement('div');
    p.classList.add('particle');
    p.style.top=Math.random()*window.innerHeight+'px';
    p.style.left=Math.random()*window.innerWidth+'px';
    p.style.width=(2+Math.random()*3)+'px';
    p.style.height=p.style.width;
    p.style.opacity=Math.random();
    gameArea.appendChild(p);
    particles.push({el:p,x:Math.random()*2-1,y:Math.random()*2-1});
}
function animateParticles(){
    particles.forEach(p=>{
        let top=parseFloat(p.el.style.top)+p.y;
        let left=parseFloat(p.el.style.left)+p.x;
        if(top<0) top=window.innerHeight;
        if(top>window.innerHeight) top=0;
        if(left<0) left=window.innerWidth;
        if(left>window.innerWidth) left=0;
        p.el.style.top=top+'px';
        p.el.style.left=left+'px';
    });
    requestAnimationFrame(animateParticles);
}
animateParticles();

// Move player left/right
function moveLeft(){
    playerLeftPercent-=5;
    if(playerLeftPercent<0) playerLeftPercent=0;
    player.style.left=playerLeftPercent+'%';
}
function moveRight(){
    playerLeftPercent+=5;
    if(playerLeftPercent>100) playerLeftPercent=100;
    player.style.left=playerLeftPercent+'%';
}

// Create obstacle (multiple types/colors)
function createObstacle(){
    const obs=document.createElement('div');
    obs.classList.add('obstacle');
    obs.style.width=(30+Math.random()*40)+'px';
    obs.style.height=(30+Math.random()*40)+'px';
    obs.style.background=['red','orange','yellow','magenta','cyan'][Math.floor(Math.random()*5)];
    obs.style.top = Math.random()* (gameArea.clientHeight - parseFloat(obs.style.height))+'px';
    obs.style.right='0px';
    gameArea.appendChild(obs);
    obstacles.push(obs);
}

// Start Game
function startGame(){
    startBtn.style.display='none';
    score=0; speed=3; playerLeftPercent=50;
    player.style.left='50%';
    scoreBoard.textContent='Score: '+score;
    gameArea.innerHTML=''; gameArea.appendChild(player);
    obstacles=[];
    clearInterval(gameInterval); clearInterval(obstacleInterval);
    obstacleInterval=setInterval(createObstacle,1200);
    gameInterval=setInterval(()=>{
        for(let i=obstacles.length-1;i>=0;i--){
            const obs=obstacles[i];
            obs.style.right=parseFloat(obs.style.right)+speed+'px';
            const obsTop=parseFloat(obs.style.top);
            const obsBottom=obsTop+parseFloat(obs.style.height);
            const obsRight=gameArea.clientWidth-parseFloat(obs.style.right);
            const obsLeft=obsRight-parseFloat(obs.style.width);
            const playerTop=parseFloat(player.offsetTop);
            const playerBottom=playerTop+40;
            const playerLeft=parseFloat(player.offsetLeft);
            const playerRight=playerLeft+40;
            if(!(playerBottom<obsTop||playerTop>obsBottom||playerRight<obsLeft||playerLeft>obsRight)){
                clearInterval(gameInterval); clearInterval(obstacleInterval);
                if(score>highscore){ highscore=score; localStorage.setItem('gravityFlipHighscore',highscore); highscoreDisplay.textContent='Highscore: '+highscore;}
                alert('Game Over! Score: '+score);
                startBtn.style.display='block';
            }
            if(obsRight>gameArea.clientWidth){ obs.remove(); obstacles.splice(i,1);}
        }
        score++; scoreBoard.textContent='Score: '+score;
        if(score%50===0) speed+=0.5;
    },20);
}

startBtn.addEventListener('click',startGame);
document.addEventListener('keydown',e=>{
    if(e.code==='ArrowLeft') moveLeft();
    if(e.code==='ArrowRight') moveRight();
});
document.addEventListener('touchstart', e=>{
    const x = e.touches[0].clientX;
    if(x<window.innerWidth/2) moveLeft();
    else moveRight();
});
</script>
</body>
</html>
